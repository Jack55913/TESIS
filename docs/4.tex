\chapter{MATERIALES Y MÉTODOS}
%  metodología estadística usada para probar las hipótesis

% diseño experimental, modelo estadístico y procedimiento de análisis


% IR ORDENANDO LOS MÉTODOS EN FUNCIÓN DE LOS OBJETIVOS. SIEMPRE LOS MÉTODOS SUELEN INICIAR CON LA DESCRIPCIÓN DEL SITIO O POBLACIÓN DE ESTUDIO. EL SITIO DE ESTUDIO ES EL MONTE TLÁLOC Y LA POBLACIÓN DE ESTUDIO SON  LAS PERSONAS QUÉ PARTICIPAN EN EL MONITOREO.

% MÉTODOS PARA CUBRIR TODOS LOS OBJETIVOS
% VER SI LA ENCUESTA ENTRA CÓMO OBJETIVO ADICIONAL O DENTRO DE EVALUACIÓN DEL NIVEL TEC.

\section{Materiales}
\subsection{Instrumentación y equipos}
\begin{itemize}
    \item Pluviómetros calibrados con botellas graduadas hechas de PET, instaladas en bases de metal cemento y madera ubicadas en los sitios de monitoreo.
    \item Dispositivos móviles con cualquier tipo de sistema operativo, para realizar pruebas de la aplicación Tláloc App .
\end{itemize}

\subsection{Infraestructura tecnológica virtual}

\begin{itemize}
        \item \textbf{Instalaciones:} Se requiere descargar los siguientes programas en sus versiones actuales: \begin{enumerate}
        \item \textbf{Kit de Desarrollo de Software}: Flutter
        \item \textbf{Entorno de Desarrollo Integrado}: Visual Studio Code y Android Studio
        \item \textbf{Herramientas de desarrollo}: Git y Visual Studio 2022  
    \end{enumerate}
    \item \textbf{Almacenamiento del código:} Se usarán los servicios de GitHub. Esta plataforma utiliza Git para proporcionar control de versiones distribuido y, a su vez, GitHub proporciona control de acceso, seguimiento de errores, solicitudes de funciones de software, gestión de tareas, integración continua a través del programa Visual Studio Code.
    \item \textbf{Servicio de Base de datos:} Se creará un proyecto en Firebase para el Hosting en la web.
    \item \textbf{Google Play Console:} Se usará para publicar el archivo .bundle a Google Play Store, para su accesibilidad de descarga en los dispositivos Android.
\end{itemize}

\section{Método}
La presente sección describe los pasos empleados, para abordar el problema central del proyecto, el cual se profundiza en el diseño y desarrollo de un algoritmo capaz de calcular valores de precipitación reales a partir de registros acumulados. Para ello, se parte de una lista de datos de entrada proporcionada por los usuarios, y se genera como salida una lista de valores corregidos que representan las mediciones reales, obtenidas mediante la resta entre cada nuevo dato y el inmediatamente anterior.

Este proceso requiere, como paso previo, el diseño de un protocolo de monitoreo participativo que motive e instruya a los usuarios en el envío constante y preciso de datos. Posteriormente, se detalla el desarrollo del algoritmo dentro del entorno de la aplicación móvil, seguido de un análisis del estado actual del proyecto con base en el nivel de maduración tecnológica.

\begin{enumerate}
  \item Protocolo de monitoreo participativo
  \item Desarrollo de la aplicación móvil
  \item Análisis del estado actual del proyecto
\end{enumerate}






\begin{figure}[h!]
    \centering
    \begin{tikzpicture}[node distance=0.8cm]
    \node (p0) [draw=orange!50, rounded corners, minimum width=8cm, minimum height=0.7cm, dashed] {Inicio};
    \node (p1) [orangebox, below=of p0] {\textbf{1. Proceso participativo con ejidatarios}};
    \node (p2) [orangebox, below=of p1] {Presentación del proyecto a las autoridades ejidales};
    \node (p3) [orangebox, below=of p2] {Talleres participativos para la identificación de \textbf{actores} y \textbf{sitios} de monitoreo};
    
    \node (p4) [yellowbox, below=of p3] {\textbf{2. Diseño técnico de monitoreo}};
    \node (p5) [yellowbox, below=of p4] {Recorridos para la caracterización de los parajes};
    \node (p6) [yellowbox, below=of p5] {Elaboración de pluviómetros y programación de la app móvil};
    \node (p7) [yellowbox, below=of p6] {Instalación de pluviómetros};
    
    \node (p8) [cyanbox, below=of p7] {\textbf{3. Campaña de difusión con público en general}};
    \node (p9) [cyanbox, below=of p8] {Campañas de mediciones};
    \node (p10) [cyanbox, below=of p9] {Publicación de resultados y premiación};
    \node (p11) [draw=cyan!50, rounded corners, minimum width=8cm, minimum height=0.7cm, dashed, below=of p10] {Final};
    
    \foreach \i/\j in {p0/p1, p1/p2, p2/p3, p3/p4, p4/p5, p5/p6, p6/p7, p7/p8, p8/p9, p9/p10, p10/p11}
      \draw [arrow] (\i) -- (\j);
    \end{tikzpicture}
    \caption{Diagrama de flujo del Protocolo de monitoreo participativo. Autoría Propia, 2025.}
      \label{t2}
\end{figure}

\subsection{Protocolo de monitoreo participativo:}

El protocolo consiste en llevar a cabo un monitoreo de lluvia que involucró tres principales etapas las cuales son: 
\begin{enumerate}
  \item Proceso participativo de ejidatarios
  \item Diseño técnico de monitoreo
  \item Campaña de difusión con público en general
\end{enumerate}
Las cuales están desglosadas en la figura \ref{t2}


\subsubsection{1. Procesos Participativos con Ejidatarios} 
El primer paso consiste en establecer contacto con los miembros de la Unión Ejidal del Monte (UEM) para presentarles el proyecto y generar alianzas para su desarrollo. Posteriormente llevar a cabo talleres participativos con cada grupo ejidal (Nativitas, San Pablo Ixayoc, San Dieguito, Tequexquinahuac, Santa Catarina del Monte) para identificar a las personas que potencialmente podrían participar en el monitoreo y los lugares para instalar sitios de monitoreo. Este paso se resume en estas dos actividades:
\begin{itemize}
  \item Contexto Geográfico
  \item Descripción de la población de estudio
\end{itemize}


\subsubsection*{Contexto Geográfico}
La determinación del \textbf{criterio de selección de sitios de monitoreo}, se hará después de visitar los lugares propuestos por las autoridades, se debe registrar los datos de coordenadas, altitud, pendiente, tipo de vegetación, superficie desprovista de árboles y tamaño de los árboles circundantes. 

Esta información permite identificar los sitios más adecuados para instalar los sitios de monitoreo, siguiendo las recomendaciones de la Organización Meteorológica Mundial (OMM, 2014). 

En una etapa posterior se realiza un proceso de capacitación con los Ejidatarios y público en general para el monitoreo de la lluvia. Asimismo, crear un protocolo para facilitar a los Ejidatarios el uso de la información generada en sus actividades de manejo de los bosques.

\subsubsection*{Descripción de la población de estudio}

Encuestar a la población que sube a la montaña en los sitios de monitoreo los parámetros descritos en la tabla \ref{tabt3}
\begin{table}[h!]
\centering
\begin{tabular}{@{}cc@{}}
\toprule
Tipo de parámetro & Detalle                                           \\ \midrule
Sociodemográfico      & Edad, género, nivel educativo, lugar de origen/localidad          \\
Tecnológico       & Uso de celular, internet, manejo de apps          \\
Actitudinal       & Disponibilidad, disposición a participar, interés \\
Territorial/ecológico & Conocimiento del bosque, frecuencia de visita, actividades      \\
Institucional/laboral & Tipo de relación con la zona (trabajo, recreación, supervisión) \\ \bottomrule
\end{tabular}
\caption{parámetros a identificar de la población}
\label{tabt3}
\end{table}
\newpage
\subsubsection{2. Diseño Técnico de Monitoreo}

\begin{enumerate}
    \item Construcción de los pluviómetros: con botellas de PET, y siguiendo los lineamientos de la Norma Mexicana NMX-AA-166/1-SCFI-2013 (\cite{se2013}) o de la Organización Meteorológica Mundial. La máxima capacidad de almacenamiento es de 153 mm y la escala tiene resolución de un milímetro, excepto por los primeros 5 mm que tienen resolución de 0.25 mm. Los pluviómetros se colocaron sobre bases de madera a un metro sobre el nivel del suelo cavando un hoyo de 50 centímetros de profundidad. Para evitar pérdidas de agua por evaporación se utilizan 5 mm de aceite comestible vegetal por pluviómetro, (Figura \ref{m21}).

    \item Los pluviómetros se vacían y registran por el equipo técnico con una frecuencia de un mes (más menos dos días), a menos que sea necesario vaciar con mayor frecuencia. Los participantes envían sus registros sin una frecuencia específica, por lo que sus observaciones son adicionales a las que realiza el equipo técnico. Cada estación de monitoreo cuenta con letreros que poseen la información necesaria para que las personas puedan participar aunque no se les haya dado una capacitación personal. Se cuenta con siete estaciones de monitoreo en un gradiente altitudinal que va de 2683 a 3870 m. 
\end{enumerate}


\begin{figure}[h!]
\centering
  \includegraphics[width=0.5\textwidth]{m21.png}
  \caption{Diseño de pluviómetro de pet}
  \label{m21}
\end{figure}






\newpage
\subsubsection{3. Campaña de difusión con público en general}

Este último paso, consiste en crear una campaña permanente de difusión entre la gente que sube a la montaña. Implica generar material gráfico instalado en campo que invite a la población a participar, trípticos y carteles que se colocan en lugares estratégicos;  utilizar las redes sociales para dar a conocer el proyecto y mecanismos para premiar a los participantes activos con regalos. 


Se plantea utilizar diversos medios y plataformas de divulgación enfocados en cada audiencia objetivo, que incluye lonas impresas, carteles, trípticos, Facebook, correos institucional y pláticas informativas. En el cuadro \ref{tab1} se muestra la descripción de medios y plataformas.

\begin{table}[h!]
    \centering
    \resizebox{\columnwidth}{!}{%
    \begin{tabular}{@{}cccc@{}}
    \toprule
    Medios y plataformas &
      Objetivo &
      Distribución &
      Audiencia objetivo \\ \midrule
    Lonas impresas &
      \begin{tabular}[c]{@{}c@{}}Difundir información\\ en sitios estratégicos\\ para incentivar la\\ participación y dar a\\ conocer el procedimiento\\ de participación.\end{tabular} &
      \begin{tabular}[c]{@{}c@{}}Se van a colocar en la\\ entrada principal a la\\ montaña (pluma de\\ acceso ubicada en el\\ sitio conocido como el\\ venturero), así como en\\ las 6 oficinas ejidales de\\ los Ejidos de la Montaña.\end{tabular} &
      Todas las audiencias \\
    Carteles &
      \begin{tabular}[c]{@{}c@{}}Dar a conocer el\\ procedimiento para\\ realizar las\\ mediciones en cada\\ sitio de monitoreo\\ de la lluvia.\end{tabular} &
      \begin{tabular}[c]{@{}c@{}}Se van a colocar en cada\\ sitio de monitoreo.\end{tabular} &
      Todas las audiencias \\
    Trípticos &
      \begin{tabular}[c]{@{}c@{}}Dar a conocer el\\ proyecto y el procedimiento de\\ participación a las\\ personas que\\ ingresan a la\\ montaña.\end{tabular} &
      \begin{tabular}[c]{@{}c@{}}Se van a repartir en la\\ entrada principal a la\\ montaña.\end{tabular} &
      \begin{tabular}[c]{@{}c@{}}Visitantes externos\\ Visitantes internos\\ Miembros de\\ instituciones gubernamentales y\\ técnicos forestales\\ Miembros de la academia\end{tabular} \\
    Página de Facebook &
      \begin{tabular}[c]{@{}c@{}}Difundir de manera\\ masiva el proyecto.\end{tabular} &
      Red social Facebook &
      Todas las audiencias \\
    Correo institucional &
      \begin{tabular}[c]{@{}c@{}}Difundir el proyecto\\ en la comunidad\\ COLPOS.\end{tabular} &
      Correo Colpos &
      Miembros de la academia \\
    Pláticas informativas &
      \begin{tabular}[c]{@{}c@{}}Dar a conocer e\\  proyecto y el\\ procedimiento de\\ participación con\\ determinadas\\ audiencias objetivo.\end{tabular} &
      \begin{tabular}[c]{@{}c@{}}Se realizó en etapas\\ previas de preparación\\ del proyecto con cada\\ Comité Ejidal. También\\ se va a llevar a cabo una\\ reunión con académicos\\ que realizan trabajo en\\ el Monte Tláloc.\end{tabular} &
      \begin{tabular}[c]{@{}c@{}}Ejidatarios de la Unión\\ de Ejidos de la Montaña\\ y sus cuadrillas de trabajo\\ Miembros de la academia\end{tabular} \\ \bottomrule
    \end{tabular}%
    }
    \caption{Medios y plataformas de divulgación del proyecto ``Ciencia ciudadana para el monitoreo participativo de la lluvia en un gradiente altitudinal del Monte Tláloc, Texcoco, estado de México''}
    \label{tab1}
    \end{table}


\subsubsection*{Descripción de información para los medios y plataformas de divulgación}

\begin{enumerate}
    \item \textbf{Lonas impresas:}
    \begin{enumerate}
        \item Título del proyecto:
        Proyecto ``Ciencia ciudadana para el monitoreo de la lluvia en un gradiente altitudinal del Monte Tláloc, Texcoco, estado de México”
        \item	Slogan: 
        ``Ciencia para ti y para todos''
        \item Logo del proyecto
        \item Logo del COLPOS y Postgrado en Ciencias Forestales
        \item Frase: Unión de Ejidos de la Montaña (junto a los logos del COLPOS y PCF)
        \item Texto principal: ¡Te invitamos a colaborar en el monitoreo de la lluvia en el Monte Tláloc, es muy sencillo!
        \item Diagrama de flujo con imágenes: \begin{enumerate}
            \item Ubica un sitio de monitoreo.
            \item Observa cuánta lluvia está almacenada en el pluviómetro.
            \item Envíanos la información (nivel del agua, fecha y hora del día) y una fotografía, con la aplicación móvil Tláloc app o por WhatsApp.
            \item Croquis del monitoreo
            \item Información complementaria: Cada 30 días se premiará con un obsequio muy especial a los 3 participantes con más registros. Además, al            registrarte en Tláloc App podrás tener acceso a la información que            generemos entre todos. Descarga Tláloc App en (poner sitio de descarga). Consulta más información en (poner la página de Facebook) o mándanos un WhatsApp para asesorarte (poner número telefónico). ¡Ayúdanos a mantener en condiciones adecuadas los instrumentos de
            medición!
        \end{enumerate}
    \end{enumerate}
    \item \textbf{Cartel frontal} \begin{enumerate}
        \item Slogan: 
        Ciencia para ti y para todos (quizás rodeando el logo del proyecto, en letra pequeña)
        \item Logo del proyecto (que destaque más que los otros logos)
        \item Logo del COLPOS y Postgrado en Ciencias Forestales
        \item Frase: Unión de Ejidos de la Montaña (junto a los logos del COLPOS y PCF)
        \item Texto principal: ¡Te invitamos a colaborar en el monitoreo de la lluvia en el Monte Tláloc!
        \item Tutorial \begin{enumerate}
            \item Observa el pluviómetro agachándote hasta que el nivel del agua esté frente a tus ojos. 
            \item Ubica la línea más cercana al nivel del agua y registra tu medición. 
            Poner esquema de cómo observar y una ampliación a cómo se ve el nivel de agua y la escala de medición.
            \item Registra tu medición con Tláloc App:
            
            Abre la aplicación e inicia sesión (colaborador externo o monitor); Escanea el código QR ubicado en la base del Pluviómetro; Registra tu medición en el espacio “Precipitación en mm”; Verifica que la fecha  y hora de la aplicación son correctas o edítalas si es necesario (poner los íconos de fecha y hora);Toma una foto del pluviómetro en la que se vea el nivel del agua como una línea. (poner una foto correcta y una incorrecta)            
            \item 	Si no cuentas con Tláloc App, anota los siguientes datos y mándalos con Whats App: Clave del pluviómetro ubicada en la base del Pluviómetro; Resultado de tu medición (Precipitación en mm); Fecha y hora; Foto del pluviómetro en la que se vea el nivel del agua como una línea. (ver las indicaciones arriba); Nunca vacíes el pluviómetro, sólo personal autorizado puede hacerlo. ¡Muchas gracias por tu contribución!            
        \end{enumerate}
    \end{enumerate}
    \item \textbf{Cartel posterior} \begin{enumerate}
        \item Título del proyecto: Proyecto “Ciencia ciudadana para el monitoreo de la lluvia en un gradiente altitudinal del Monte Tláloc, Texcoco, estado de México”
        \item Logo del COLPOS y Postgrado en Ciencias Forestales
        \item Frase: Unión de Ejidos de la Montaña
        \item Texto principal: Este es un pluviómetro. Tiene una escala de medición en milímetros que indica la cantidad de lluvia que cae por metro cuadrado de terreno.
        \item Esquema del pluviómetro y la equivalencia de un mm de lluvia (1 mm = a vaciar un litro de agua en cada metro cuadrado de terreno).
        \item Saber cuándo, dónde y cuánto llueve en la montaña ayuda a entender cómo conservar el bosque y el agua que viene de ella. Cada 30 días se premiará a los 3 participantes con más registros. Además, al registrarte en Tláloc App podrás tener acceso a la información que generemos entre todos. Descarga Tláloc App en (poner sitio de descarga). Consultar más información en Facebook o mándanos un WhatsApp para asesorarte. ¡Ayúdanos a cuidar este pluviómetro! Por favor reporta si encuentras dañado este sitio de monitoreo.
    \end{enumerate}
    % \item \textbf{Tríptico}
    % \item \textbf{Página de Facebook}
    % \item \textbf{Pláticas informativas}
\end{enumerate}





































































\subsection{Desarrollo del código}
En este sistema de monitoreo participan tres elementos principales: el usuario, el pluviómetro y la aplicación multiplataforma. El usuario es la persona encargada de registrar las mediciones realizadas por el pluviómetro artesanal, instalado en un paraje específico. Esta interacción ocurre a través de un código QR asignado a cada pluviómetro, el cual permite vincularlo con su ubicación y sus datos de monitoreo.

La aplicación multiplataforma facilita esta interacción al estar disponible en diferentes dispositivos como teléfonos inteligentes, tabletas, laptops o computadoras de escritorio, y puede ejecutarse en sistemas operativos como Android, iOS, Huawei OS, Windows y navegadores web. De este modo, el usuario puede elegir el dispositivo de su preferencia para capturar y enviar los datos registrados por el pluviómetro al sistema.

La Figura \ref{t3}, muestra el diagrama de flujo que representa el comportamiento operativo del sistema y cómo se realiza el intercambio de información entre estos tres actores.
\begin{figure}[h!]
\centering
  \includegraphics[width=1\textwidth]{t3.pdf}
  \caption{Diagrama de flujo de trabajo del sistema de Pluviómetros con Tláloc App}
  \label{t3}
\end{figure}

La metodología para el desarrollo del código, consiste en programar en lenguaje Dart, una aplicación multiplataforma, alojada en un sitio web y en Play Store, con el fin de enviar las mediciones a una base de datos pública bajo la siguiente organización:


\begin{enumerate}
  \item \textbf{Backend}
  \begin{enumerate}
    \item Alojamiento del código: Exportar y guardar en GitHub
    \item Base de datos: Lógica del código, seguridad y conexión en Firebase
    \item Hosting en la web: Publicar un dominio en Firebase
  \end{enumerate}
  \item \textbf{Frontend}
  \begin{enumerate}
    \item User Experience (UX)
     \begin{enumerate}
      \item Material Design
      \item Acceso en tienda de aplicaciones (PlayStore)
     \end{enumerate}
    \item User Interface (UI)
    % : se construye a partir de widgets, que son unidades reutilizables de interfaz. Estos widgets permiten definir pantallas de forma declarativa, promoviendo una organización jerárquica clara y facilitando el mantenimiento del código. Un diseño de UI eficiente no solo debe ser estéticamente agradable, sino también funcional, accesible y coherente con los principios de diseño establecidos (como Material Design). Las pantallas a mostrar son las siguientes:
    \begin{enumerate}
    \item Onboarding: Pagina de bienvenida 
    \item Login: Los usuarios podrán crear una cuenta y elegir el pluviómetro mediante el escaneo de códigos Qr o manualmente del sitio de monitoreo 
    \item Menú Principal: Dispondrá de tutoriales, contador de mediciones, acerca de, tabulador de mediciones, mapas de las dos rutas, grupos para subir a la montaña y contacto
    \item Envío de mediciones: Incluye campo de texto, pluviómetro interactivo, booleano de vaciado, cambio de paraje
    \item Bitácora: Disponibilidad de consulta, edición, difusión o eliminación de las mediciones propias y no de otros usuarios; y exportación en excel.
    \item Estadísticas: Mostrará un gráfico interactivo en diferentes tiempo de interés, por ejemplo por semana, mes y año; entre volúmenes acumulados y reales.
\end{enumerate}
  \end{enumerate}
\end{enumerate}











\newpage
\subsubsection{1a. Configuración en GitHub}

\subsubsection*{Control de versiones y almacenamiento en GitHub}

El desarrollo de aplicaciones requiere no solo un diseño estructurado del código, sino también un control riguroso de versiones y respaldos. GitHub es una plataforma ampliamente usada en el ámbito académico y profesional para alojar proyectos de software, permitiendo la colaboración, el seguimiento de cambios y el resguardo del historial del código fuente. 

Para este proyecto, el repositorio deberá publicarse en GitHub:
\begin{center}
\url{https://github.com}
\end{center}

\subsubsection*{Proceso para guardar código localmente en GitHub con Git}

El flujo básico para controlar versiones de un proyecto usando \texttt{git} desde la computadora incluye los siguientes pasos:

\begin{enumerate}
    \item Inicializar el repositorio en la carpeta del proyecto (solo la primera vez):
    \begin{minted}{bash}
    git init
    \end{minted}
    
    \item Configurar nombre y correo del autor (también solo una vez):
    \begin{minted}{bash}
    git config --global user.name "Luis Emilio Álvarez Herrera"
    git config --global user.email "ejemplo@dominio.com"
    \end{minted}
    
    \item Agregar el repositorio remoto de GitHub:
    \begin{minted}{bash}
    git remote add origin https://github.com/Jack55913/TlalocApp.git
    \end{minted}
    
    \item Verificar el estado del repositorio y los archivos modificados:
    \begin{minted}{bash}
    git status
    \end{minted}
    
    \item Añadir los archivos que se desean guardar (todos o algunos específicos):
    \begin{minted}{bash}
    git add .
    \end{minted}
    
    \item Registrar los cambios con un mensaje claro:
    \begin{minted}{bash}
    git commit -m "Primera versión de Tláloc App"
    \end{minted}
    
    \item Subir los cambios al repositorio remoto en GitHub:
    \begin{minted}{bash}
    git push -u origin main
    \end{minted}
\end{enumerate}

Este flujo se puede repetir cada vez que se realicen avances importantes en el código. Gracias a Git, cada modificación queda registrada con fecha, autor y propósito, lo cual facilita el mantenimiento del software, el trabajo colaborativo y la trazabilidad científica del desarrollo.

\subsubsection*{Clonar el repositorio desde GitHub}

Si se necesita obtener una copia exacta del proyecto alojado en GitHub en otra computadora, es posible usar el comando \texttt{git clone}. Este comando descarga todo el historial y los archivos del proyecto:

\begin{minted}{bash}
git clone https://github.com/Jack55913/TlalocApp.git
\end{minted}

Este comando crea automáticamente una carpeta llamada \texttt{TlalocApp} con todos los archivos y el historial del proyecto.

\subsubsection*{Subir cambios al repositorio remoto: \texttt{git push}}

Una vez realizados cambios en el código, es posible subirlos a GitHub con el siguiente flujo:

\begin{enumerate}
    \item Verificar el estado del repositorio local:
    \begin{minted}{bash}
    git status
    \end{minted}
    
    \item Agregar los archivos modificados al área de preparación:
    \begin{minted}{bash}
    git add .
    \end{minted}
    
    \item Registrar los cambios localmente con un mensaje:
    \begin{minted}{bash}
    git commit -m "Descripción clara del cambio realizado"
    \end{minted}
    
    \item Subir los cambios al servidor de GitHub:
    \begin{minted}{bash}
    git push origin main
    \end{minted}
\end{enumerate}

Este proceso permite mantener actualizado el repositorio en la nube, sirviendo como respaldo y facilitando el trabajo colaborativo.

\subsubsection*{Obtener actualizaciones del repositorio remoto: \texttt{git pull}}

Si se ha trabajado en el mismo repositorio desde otra computadora o por otros colaboradores, se deben sincronizar los cambios con:

\begin{minted}{bash}
git pull origin main
\end{minted}

Este comando fusiona los cambios realizados en GitHub con la copia local del proyecto. Es recomendable ejecutarlo antes de comenzar una nueva sesión de desarrollo para evitar conflictos.


















\subsubsection{1b. Configuración en Firebase} 
Para establecer una conexión efectiva entre una aplicación desarrollada en \textit{Flutter} y el servicio de base de datos en tiempo real \textit{Firestore}, proporcionado por \textit{Firebase}, es necesario llevar a cabo una serie de configuraciones tanto en la plataforma web de Firebase como dentro del propio entorno del proyecto Flutter.

El primer paso consiste en acceder al panel de control oficial de Firebase, disponible en:

\begin{center}
  \url{https://console.firebase.google.com/}
\end{center}

Desde esta consola, se debe crear un nuevo proyecto seleccionando la opción \texttt{Agregar proyecto}, asignándole un nombre distintivo y, de forma opcional, desactivando Google Analytics según los requerimientos de privacidad. Una vez creado el proyecto, se procede a registrar las plataformas de destino, por ejemplo, \textit{Android} y \textit{Web}, haciendo clic en los íconos correspondientes.

\vspace{1em}

\paragraph{Configuración en Android.}  
Para Android, se solicita un identificador de paquete único, por ejemplo:

\begin{center}
  \texttt{com.TlalocApps.tlaloc}
\end{center}

Este identificador debe coincidir exactamente con el declarado en el archivo \texttt{android/app/build.gradle}. Al registrar la app, Firebase generará un archivo de configuración llamado \texttt{google-services.json}, el cual debe descargarse y colocarse dentro del directorio \texttt{android/app/} del proyecto Flutter.

\vspace{1em}

\paragraph{Configuración en Web.}  
En el caso de aplicaciones web, se debe registrar un nombre de dominio o ID de aplicación. Al finalizar, Firebase genera un bloque de código JavaScript con claves como \texttt{apiKey}, \texttt{projectId} y \texttt{messagingSenderId}. En Flutter, basta con integrar estas claves a través de un archivo generado automáticamente, como se explica más adelante.

\vspace{1em}

\paragraph{Instalación de dependencias.}  
Dentro del archivo \texttt{pubspec.yaml}, se deben agregar los paquetes necesarios para la conexión con Firebase, por ejemplo:

\begin{center}
  \texttt{firebase\_core}, \quad
  \texttt{cloud\_firestore}, \quad
  \texttt{firebase\_auth}, \quad
  \texttt{firebase\_storage}
\end{center}

Posteriormente, se deben instalar con el comando:

\begin{center}
  \texttt{flutter pub get}
\end{center}

\vspace{1em}

\paragraph{Inicialización de Firebase.}  
En el archivo principal \texttt{main.dart}, es indispensable inicializar Firebase antes de correr la aplicación, utilizando:

\begin{center}
  \texttt{await Firebase.initializeApp();}
\end{center}

Esto se hace dentro de la función \texttt{main()} usando \texttt{WidgetsFlutterBinding.ensureInitialized()} para evitar errores de ejecución asíncrona.

\vspace{1em}

\paragraph{Ajustes específicos en Android.}  
Se requiere modificar el archivo \texttt{android/build.gradle} para añadir el siguiente classpath dentro de la sección \texttt{dependencies}:

\begin{center}
  \texttt{classpath 'com.google.gms:google-services:4.3.15'}
\end{center}

Asimismo, en \texttt{android/app/build.gradle} se debe aplicar el plugin:

\begin{center}
  \texttt{apply plugin: 'com.google.gms.google-services'}
\end{center}

También es recomendable asegurar que la versión mínima de SDK sea \texttt{minSdkVersion 21} o superior, y que las versiones de \texttt{Kotlin} y \texttt{Gradle} sean compatibles con Firebase.

\vspace{1em}

\paragraph{Configuración multiplataforma con FlutterFire CLI.}  
Para simplificar la configuración de Firebase en todas las plataformas, se recomienda utilizar la herramienta oficial de línea de comandos para Flutter, mediante el siguiente comando:

\begin{center}
  \texttt{flutterfire configure}
\end{center}

Este comando genera automáticamente el archivo \texttt{firebase\_options.dart}, el cual contiene la configuración centralizada para \texttt{Android}, \texttt{iOS}, \texttt{macOS} y \texttt{Web}. En el código, se debe inicializar Firebase con:

\begin{center}
  \texttt{Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);}
\end{center}

Esto garantiza una inicialización adecuada en cualquier dispositivo desde el que se ejecute la aplicación.

\vspace{1em}

Con esta configuración correctamente establecida, la aplicación Flutter puede acceder de forma segura y eficiente a Firestore, lo cual permite implementar funcionalidades como autenticación, almacenamiento, y sincronización de datos en tiempo real entre usuarios y dispositivos.


\subsubsection{1c. Web Hosting}
Además del almacenamiento de datos, se habilitó el servicio de \textbf{Firebase Hosting} para desplegar una versión web de la aplicación. Este entorno permite servir contenido estático y dinámico mediante HTTPS, ofreciendo una plataforma confiable y segura para la visualización pública de estadísticas y reportes.

La implementación del hosting se realizó con los siguientes pasos:

\begin{enumerate}
    \item Instalación de las herramientas de línea de comandos de Firebase (\texttt{firebase-tools}).
    \item Inicialización del proyecto con \texttt{firebase init} y selección de las funciones de Hosting.
    \item Configuración del directorio de salida del proyecto web compilado con Flutter.
    \item Despliegue del sitio mediante el comando \texttt{firebase deploy}.
\end{enumerate}






\subsubsection{2a. User Experience}

Para diseñar una experiencia de usuario (UX) sólida y centrada en las necesidades reales de las personas usuarias, es fundamental comprender y aplicar la estructura (\cite{garrett2011elements}), quien descompone la experiencia del usuario en cinco planos jerárquicos e interdependientes. 

Estos planos permiten están esquematizados en la figura \ref{m7}, y abordan el diseño desde la abstracción estratégica hasta su implementación visual concreta. 

\begin{enumerate}
  \item En primer lugar, el plano de la \textbf{estrategia} define los objetivos tanto del usuario como del proyecto, estableciendo el ``por qué'' detrás del sistema. 
  
   \item A continuación, el plano del \textbf{alcance} transforma estos objetivos en requerimientos funcionales (como las características del sistema) y requerimientos de contenido (como textos, imágenes o formularios).

 \item El tercer plano corresponde a la \textbf{estructura}, que se refiere a cómo se organizan las funciones y el contenido dentro del sistema, abarcando tanto la arquitectura de la información como el diseño de la interacción. 
 
  \item Posteriormente, el plano del \textbf{esqueleto} define el diseño de la interfaz, la navegación y la disposición de los elementos para asegurar la usabilidad, que para este caso se usó el programa Figma para elaborar diseñar. 
  \begin{center}
    \url{https://www.figma.com/}
  \end{center}
  
   \item El último plano llamado \textbf{superficie}, es la capa visual con la que el usuario interactúa directamente, incluyendo la elección de colores, tipografía, iconografía y estilo gráfico. Este modelo secuencial permite una toma de decisiones coherente y una alineación efectiva entre las necesidades del usuario y los objetivos del proyecto. Para el presente proyecto se usó Material Design 3:
   \begin{center}
    \url{https://m3.material.io/}
   \end{center}
\end{enumerate}


\begin{figure}[h!]
\centering
  \includegraphics[width=0.9\textwidth]{m7.jpg}
  \caption{El modelo delineado busca definir las consideraciones clave que forman el desarrollo de la experiencia de usuario. \cite{garrett2011elements}}
  \label{m7}
\end{figure}

\newpage
\subsubsection*{Tiendas de aplicaciones}
Para publicar una aplicación Flutter en la Google Play Store requiere seguir una serie de pasos técnicos y administrativos que garantizan la calidad, seguridad y compatibilidad del producto final. A continuación se describe el proceso completo para llevar la app desde el entorno de desarrollo hasta su disponibilidad pública en la tienda.

\paragraph{1. Crear una cuenta de desarrollador en Google Play}

Antes de iniciar el proceso técnico, se debe crear una cuenta en la Play Console (\url{https://play.google.com/console}) como desarrollador. Esto requiere:

\begin{itemize}
    \item Una cuenta de Google personal o institucional.
    \item El pago único de una tarifa de registro (25 USD al momento de la redacción).
    \item Aceptar los términos y condiciones de Google Play.
\end{itemize}

\paragraph{2. Preparar la aplicación Flutter}

Para distribuir una app Flutter en Android se deben cumplir los siguientes pasos:

\begin{enumerate}
    \item Establecer nombre del paquete de forma única en el archivo \texttt{android/app/build.gradle}, por ejemplo:
\begin{minted}{yaml}
applicationId "com.TlalocApps.tlaloc"
\end{minted}

    \item Modificar el archivo \texttt{android\/app\/src\/main\/AndroidManifest.xml} para establecer permisos, íconos y orientaciones.

    \item Establecer versión y código de versión en \texttt{pubspec.yaml}:
\begin{minted}{yaml}
version: 1.0.0+1
\end{minted}

    \item Configurar el ícono de la app usando el paquete \texttt{flutter\_launcher\_icons}:
\begin{minted}{bash}
flutter pub add flutter\_launcher_icons
flutter pub run flutter\_launcher_icons:main
\end{minted}

    \item Habilitar los modos de firma para release en \texttt{android\/key.properties} y \texttt{build.gradle}. Crear una clave de firma con:
\begin{minted}{bash}
keytool -genkey -v -keystore ~/key.jks \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -alias tlaloc_key
\end{minted}

    \item Asegurar que se usa la variante \texttt{release} al compilar:
\begin{minted}{bash}
flutter build appbundle
\end{minted}

    Este comando genera un archivo \texttt{.aab} (Android App Bundle) necesario para subir la app a la Play Store.\cite{AndroidSigning}
\end{enumerate}

\paragraph{3. Crear la ficha de Play Store}

Desde Google Play Console:

\begin{itemize}
    \item Seleccionar \textbf{Crear aplicación}.
    \item Ingresar nombre, idioma, tipo (App o Juego) y categoría (Educación, Estilo de vida, etc.).
    \item Completar la \textbf{ficha de Play Store}: título, descripción corta y larga, íconos (512x512 px), capturas de pantalla (mínimo 2), gráfico promocional opcional, política de privacidad (vínculo web).
\end{itemize}

\paragraph{4. Subir el archivo .AAB y configurar la versión}

\begin{itemize}
    \item Ir a \textbf{Release > Producción > Crear nueva versión}.
    \item Cargar el archivo \texttt{.aab} generado.
    \item Agregar notas de la versión.
    \item Establecer políticas de uso, permisos solicitados y nivel mínimo de API.
\end{itemize}

\paragraph{5. Clasificación de contenido y verificación}

Se debe:

\begin{itemize}
    \item Responder el cuestionario de clasificación por edades.
    \item Completar la sección de seguridad de datos y uso de bibliotecas externas (Firebase, Google Sign-In, etc.).
    \item En algunos casos, aceptar la revisión previa de funciones sensibles.
\end{itemize}

\paragraph{6. Publicar la aplicación}

Una vez completado todo el proceso anterior:

\begin{itemize}
    \item Se envía la aplicación para revisión.
    \item El proceso puede tardar entre 24 a 72 horas.
    \item Si es aprobada, aparecerá públicamente en la Play Store en cuestión de horas.
\end{itemize}

\paragraph{7. Actualizaciones posteriores}

Cada vez que se realiza una actualización, se debe:

\begin{enumerate}
    \item Incrementar el código de versión en \texttt{pubspec.yaml}.
    \item Generar un nuevo archivo \texttt{.aab}.
    \item Subir la nueva versión en \textbf{Play Console}.
\end{enumerate}





\subsubsection{2b. User Interface}

El desarrollo de una aplicación móvil requiere no solo la implementación funcional del código, sino también una organización arquitectónica sólida basada en principios de programación orientada a objetos (POO). Esta metodología permite estructurar el proyecto en módulos bien definidos, reutilizables y escalables, facilitando la colaboración, el mantenimiento y la evolución del software a largo plazo.

En el contexto de Flutter, un framework multiplataforma basado en el lenguaje Dart, la programación orientada a objetos se refleja en la creación de clases, componentes y funciones que encapsulan el comportamiento y la lógica de la interfaz, el manejo de datos y la interacción con servicios externos. Cada parte de la aplicación se define como un widget o clase independiente, lo que promueve una arquitectura limpia y modular.

Un proyecto de programación orientada a objetos bien estructurado debe cumplir con los siguientes principios fundamentales:

\begin{enumerate}
    \item \textbf{Encapsulamiento}: Separar la lógica interna de los objetos del acceso externo mediante funciones o métodos bien definidos.
    \item \textbf{Abstracción}: Definir estructuras lógicas que representen entidades clave del sistema (usuarios, mediciones, parajes, etc.).
    \item \textbf{Herencia}: Reutilizar comportamientos comunes a través de clases base o mixins cuando sea necesario.
    \item \textbf{Polimorfismo}: Permitir la utilización de interfaces genéricas que se comportan de forma diferente según el contexto.
\end{enumerate}



\subsection{Evaluación del nivel de maduración tecnológica}

El modelo del CONACyT, ahora SECIHTI, ha derivado la Norma Oficial Mexicana NMX-GT-004-IMNC-2012, identifica cada nivel de TRL por medio de una lista de verificación con preguntas dicotómicas con respuestas de ``si'' o ``no'', lo que permite que la herramienta sea eficiente.


El Nivel de Madurez Tecnológica (NMT o Technology Readiness Level, TRL, en inglés) 
Es una escala de medición usada para evaluar o medir el nivel de madurez de una
tecnología particular. Cada proyecto es evaluado frente a los parámetros de cada
nivel tecnológico y es asignado a una clasificación basada en el progreso del
proyecto.

Para la presente investigación, apoyándose de la figura \ref{m19}, se hará la evaluación del nivel de maduración tecnológica de Tlaloc App.

\begin{figure}[h!]
\centering
  \includegraphics[width=1\textwidth]{m19.png}
  \caption{Guía para el Diagnóstico del Nivel de Madurez Tecnológica (NMT o TRL, por sus siglas en inglés), recuperado de: \cite{SECIHTIConvocatorias}}
  \label{m19}
\end{figure}
